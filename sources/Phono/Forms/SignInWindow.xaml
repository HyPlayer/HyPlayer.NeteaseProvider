<?xml version="1.0" encoding="utf-8" ?>
<base:WindowBase
    x:Class="Phono.Forms.SignInWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:base="using:Richasy.WinUIKernel.Share.Base"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:imageex="using:ImageEx"
    xmlns:local="using:Phono.Forms"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="SignInWindow"
    Width="720"
    Height="480"
    IsAlwaysOnTop="True"
    IsMaximizable="False"
    IsMinimizable="False"
    IsResizable="False"
    mc:Ignorable="d">

    <Grid>
        <Grid.Resources>
            <AcrylicBrush
                x:Key="BackgroundAcrylicBrush"
                FallbackColor="{ThemeResource SolidBackgroundFillColorBase}"
                TintColor="{ThemeResource SolidBackgroundFillColorBase}"
                TintLuminosityOpacity="0.9"
                TintOpacity="0.95" />
        </Grid.Resources>
        <base:AppTitleBar
            x:Name="TitleBarArea"
            Height="28"
            VerticalAlignment="Top"
            Canvas.ZIndex="99" />
        <imageex:ImageEx
            x:Name="BackgroundImage"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Source="https://flarum.csur.fun/2022-12-25/1671970508-774457-image.png"
            Stretch="UniformToFill" />
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="1" Background="{ThemeResource BackgroundAcrylicBrush}">
                <Grid Margin="24,32" RowSpacing="32">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid>
                        <TextBlock Style="{ThemeResource TitleTextBlockStyle}" HorizontalAlignment="Left" >Sign In</TextBlock>
                        <Button x:Name="SignInToolButton">
                            <Button.Flyout>
                                <Flyout>
                                    <HyperlinkButton x:Name="RegisterCurrentIdBtn" Command="{x:Bind ViewModel.RegisterByCurrentDeviceIdCommand, Mode=OneWay}">
                                        注册当前设备 ID
                                    </HyperlinkButton>
                                </Flyout>
                            </Button.Flyout>
                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE713;" />
                            
                        </Button>
                    </Grid>
                    
                    <Grid Grid.Row="1">
                        <Border
                            Width="198"
                            Height="198"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="{ThemeResource ControlCornerRadius}">
                            <Image
                                x:Name="QRCodePresenter"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Source="{x:Bind ViewModel.QrCodeImage, Mode=OneWay}"
                                Loaded="ImageEx_Loaded" />
                        </Border>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>

    </Grid>
</base:WindowBase>
